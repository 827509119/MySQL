对于InnoDB和MyISAM 表，分别可以通过innodb_stats_method和 myisam_stats_method系统变量来控制对表统计信息的收集 。这些变量具有三个可能的值，其区别如下：

1、（默认）当变量设置为时nulls_equal，所有NULL值都被视为相同（也就是说，它们全部形成一个值组）。

	如果NULL值组大小远大于平均非NULL值组大小，则此方法会使平均值组大小向上倾斜。这使得索引在优化器中似乎没有那么有用，而对于查找非NULL值的联接而言，索引的作用实际上
	不那么有用。因此，该 nulls_equal方法可能会导致优化器ref在应该使用索引时不使用索引。

	理解：假设库中有20w条数据，
	
		假设表中没有NULL值的时候，省这个字段索引，
			并且假设每个省的数据量大小是一样的。
			基数理论上是34，则总体的平均值组大小为 20w/34 约为 5882
		当库中有NULL值之后，假设把其中2W个省变为NULL，此时满足条件——NULL值组大小远大于平均非NULL值组大小
			NULL值组大小为 2w
			非NULL值的平均值组大小为：18w/34 = 5294 
			则总体上的平均值组大小为: (20000 + 5294)/2 = 12647
			直接变成理想状态下的2倍。
		
		MySQL在选取索引的时候。发现这个12647平均值组太大，可能就放弃使用该索引。
2、当变量设置为时 nulls_unequal，NULL 值将被认为是不同的。而是，每个 NULL值形成一个单独的大小为1的值组。

	如果您有很多NULL值，则此方法会使平均值组的大小向下倾斜。如果平均非NULL值组大小很大，则将NULL每个值作为一组大小1进行计数会使优化器高估寻找非NULL 值的联接的索引值。
	因此，当其他方法可能更好时，该nulls_unequal 方法可能导致优化器使用此索引进行 ref查找。
	
	理解：假设库中有20w条数据，
	
		假设表中没有NULL值的时候，省这个字段索引，
			并且假设每个省的数据量大小是一样的。
			基数理论上是34，则总体的平均值组大小为 20w/34 约为 5882
			
		当库中有NULL值之后，假设把其中2W个省变为NULL，并且每个NULL值都"不一样",值组记为1
			
			NULL值组大小为 1 (共2w个值组大小为1)
			非NULL值的平均值组大小为：18w/34 = 5294 
			则总体上的平均值组大小为: (20000 + 5294)/20001 = 1.2647
			直接变成理想状态下 1/5000.
		MySQL在选取索引时，觉得这个索引的选择性更高，因为他有很多不重复的值
			
			
3、将变量设置为时 nulls_ignored，NULL 将忽略值。


(官网原话)如果您倾向于使用许多使用<=>而不是的联接 =，则 NULL值在比较中并不特殊，并且一个NULL等于另一个。在这种情况下，nulls_equal是适当的统计方法。
	
	理解：
		例如：NULL NULL 1 2 2 3 3 3 4 4 4
		1、nulls_equal中，使用的是 安全等<=>，所以他会把所有的NULL值都统计在一起。Cadinality值为5
		2、nulls_unequal中，使用的是 = ，判断 NULL = NULL 时，结果为0，故每个NULL值都不一样。Cadinality值为6
	
(官网原话)该innodb_stats_method系统变量具有全局值; 该 myisam_stats_method系统变量有全局和会话值。设置全局值会影响从相应存储引擎收集表的统计信息。
设置会话值只会影响当前客户端连接的统计信息收集。这意味着您可以通过将会话值设置为来强制使用给定的方法重新生成表的统计信息，而不会影响其他客户端 myisam_stats_method。

(官网原话)要重新生成MyISAM表统计信息，可以使用以下任何一种方法：

	1、执行myisamchk --stats_method=method_name --analyze

	2、更改表以使其统计信息过时（例如，插入一行然后将其删除），然后设置 myisam_stats_method并发出一条ANALYZE TABLE 语句

(官网原话)关于使用的一些注意事项 innodb_stats_method和 myisam_stats_method：

	1、如前所述，您可以强制显式收集表统计信息。但是，MySQL可能还会自动收集统计信息。例如，如果在执行表语句的过程中，其中一些语句修改了表，则MySQL可能会收集统计信息。
（例如，这可能发生在批量插入或删除操作或某些 ALTER TABLE语句中。）如果发生这种情况，则使用任何值 innodb_stats_method或 myisam_stats_method当时有。
因此，如果您使用一种方法收集统计数据，但系统变量被设置为另一种方法时，表的统计数据自动收集后，将使用系统变量设置的那个方法。(也就是说，手动执行的时候，可以指定方法，
但MySQL自己收集的时候，依赖于系统变量。)

	2、无法判断使用哪种方法来生成给定表的统计信息.

	3、这些变量仅适用于InnoDB和 MyISAM表。其他存储引擎只有一种收集表统计信息的方法。通常它更接近该nulls_equal方法。